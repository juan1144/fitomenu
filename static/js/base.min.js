const sidebar=document.body.querySelector("#sidebar");function updateShowSidebar(){let isSidebarSet=localStorage.getItem("showSidebar")!==null;let showSidebar=localStorage.getItem("showSidebar")==="true";if(!isSidebarSet){sidebar.classList.add("show")}else if(showSidebar){sidebar.classList.add("show")}else{sidebar.classList.remove("show")}}updateShowSidebar();sidebar.addEventListener("hide.bs.collapse",e=>{if(e.target.id==="sidebar"){localStorage.setItem("showSidebar",false);updateShowSidebar()}});sidebar.addEventListener("show.bs.collapse",e=>{if(e.target.id==="sidebar"){localStorage.setItem("showSidebar",true);updateShowSidebar()}});document.addEventListener("keydown",function(event){let key=event.key|event.keyCode;if(key===113){const sidebar=document.querySelector("#sidebar");const collapseSidebar=new bootstrap.Collapse(sidebar);collapseSidebar.toggle()}});const toastElements=document.querySelectorAll(".toast:not(#base-message):not(#request-message)");const toasts=[...toastElements].map(toastEl=>new bootstrap.Toast(toastEl));toasts.map(toastEl=>toastEl.show());function showMessage(content,level,_autohide=true){const messages=document.body.querySelector("#messages");const message=messages.firstElementChild.cloneNode(true);const messageToast=new bootstrap.Toast(message,{autohide:_autohide});messages.appendChild(message);message.querySelector("#message-body").innerHTML=content;if(level===20){message.classList.add("bg-info","text-bg-info")}else if(level===25){message.classList.add("bg-success","text-bg-success")}else if(level===30){message.classList.add("bg-warning","text-bg-warning")}else if(level===40){message.classList.add("bg-danger","text-bg-danger")}toasts.push(messageToast);messageToast.show()}document.body.addEventListener("showHtmxMessage",evt=>{showMessage(evt.detail.content,evt.detail.level)});document.body.addEventListener("htmx:beforeSwap",evt=>{if(evt.detail.xhr.status===422){evt.detail.shouldSwap=true;evt.detail.isError=false}else{if(evt.detail.xhr.status>=400&&evt.detail.xhr.status<600){showMessage("Ha ocurrido un error inesperado, por favor contacte al administrador",40,false)}}});document.body.addEventListener("htmx:sendError",()=>{let message="";message+="Ha ocurrido un error de conexión, ";message+="por favor intente nuevamente o contacte al administrador";showMessage(message,40,false);document.body.querySelector("#request-message").classList.remove("show")});document.body.querySelectorAll("[dx-case]").forEach(input=>{input.addEventListener("input",function(event){let toCase=input.getAttribute("dx-case");if(toCase==="lower"){event.target.value=event.target.value.toLowerCase()}else if(toCase==="upper"){event.target.value=event.target.value.toUpperCase()}})});document.body.querySelectorAll("[dx-numeric]").forEach(input=>{input.addEventListener("input",function(event){event.target.value=event.target.value.replace(/\D/g,"")})});document.body.querySelectorAll("[dx-alphanumeric]").forEach(input=>{input.addEventListener("input",function(event){event.target.value=event.target.value.replace(/[^a-zA-Z0-9Ññ]/g,"")})});document.querySelectorAll("[data-copy-content]").forEach(item=>{item.addEventListener("click",function(){navigator.clipboard.writeText(item.dataset.copyContent||"").then(()=>{showMessage(item.dataset.copyMessage||"Contenido copiado al portapapeles",item.dataset.copyMessageLevel||25)},()=>{showMessage("El contenido no pudo ser copiado, contacte al administrador",30)})})});document.body.querySelectorAll("#form_modal").forEach(item=>{item.addEventListener("closeModalForm",()=>{let modal=bootstrap.Modal.getInstance(item);modal.hide()})});